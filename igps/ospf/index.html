<!DOCTYPE html>
<html>
  <head>
    <title>overloaded bits</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2019-07-15T13:19:13 DST">
<title>OSPF :: overloaded bits</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/theme-flex/style.css" rel="stylesheet">

	<link href="/theme-flex/variant-gold.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "\/";
</script>
<meta name="description" content="OSPF">



    
  </head>
  <body data-url="/igps/ospf/">
    
      <header>
  <div class="logo">
    
	
  
    <a class="baselink" href="/">overloaded bits</a>
  


  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="https://github.com/ferfemar"  rel="noopener">
                  <i class='fa fa-github'></i> <label>Github repo</label>
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/" class="dd-item">
          <a href="/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/ipspace-course-notes/" class="dd-item haschildren
        ">
      <div>
      <a href="/ipspace-course-notes/">Building Network Automation Solutions Course Notes</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/ipspace-course-notes/watch-list/" class="dd-item">
        <div>
          <a href="/ipspace-course-notes/watch-list/">
            List of materials to study
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/certs/" class="dd-item haschildren
        ">
      <div>
      <a href="/certs/">Certifications</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/certs/jncix-sp/" class="dd-item">
        <div>
          <a href="/certs/jncix-sp/">
            JNCIx-SP
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/igps/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/igps/">IGPs</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/igps/isis/" class="dd-item">
        <div>
          <a href="/igps/isis/">
            IS-IS
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/igps/ospf/" class="dd-item active">
        <div>
          <a href="/igps/ospf/">
            OSPF
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/mpls-vpns/" class="dd-item haschildren
        ">
      <div>
      <a href="/mpls-vpns/">MPLS VPNs</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/mpls-vpns/vpls/" class="dd-item">
        <div>
          <a href="/mpls-vpns/vpls/">
            VPLS
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/multicast/" class="dd-item haschildren
        ">
      <div>
      <a href="/multicast/">Multicast</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/multicast/igmp/" class="dd-item">
        <div>
          <a href="/multicast/igmp/">
            IGMP
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/netops/" class="dd-item haschildren
        ">
      <div>
      <a href="/netops/">Netops</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/netops/ansible/" class="dd-item haschildren
        ">
      <div>
      <a href="/netops/ansible/">Ansible</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/netops/ansible/ansible-w-junos/" class="dd-item">
        <div>
          <a href="/netops/ansible/ansible-w-junos/">
            Ansible for Junos basics
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/netops/ansible/working-with-timestamp/" class="dd-item">
        <div>
          <a href="/netops/ansible/working-with-timestamp/">
            Ansible timestamps
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/netops/git/" class="dd-item haschildren
        ">
      <div>
      <a href="/netops/git/">GIT</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/netops/git/panic_buttons/" class="dd-item">
        <div>
          <a href="/netops/git/panic_buttons/">
            Git Panic Commands
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/netops/python/" class="dd-item haschildren
        ">
      <div>
      <a href="/netops/python/">Python</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/netops/python/python-virtualenvs/" class="dd-item">
        <div>
          <a href="/netops/python/python-virtualenvs/">
            Python Virtual Enviroments
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/netops/python/python-basics/" class="dd-item">
        <div>
          <a href="/netops/python/python-basics/">
            Python basics
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/netops/python/openpyxl/" class="dd-item">
        <div>
          <a href="/netops/python/openpyxl/">
            Working with Excel in Python
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/vendors/" class="dd-item haschildren
        ">
      <div>
      <a href="/vendors/">Vendor specifics</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/vendors/iosxe_cli/" class="dd-item">
        <div>
          <a href="/vendors/iosxe_cli/">
            IOS-XE CLI
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/vendors/junos_cli/" class="dd-item">
        <div>
          <a href="/vendors/junos_cli/">
            Junos CLI
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/ipspace-course-notes/" >
   Building Network Automation Solutions Course Notes</option>
    <option value="/certs/" >
   Certifications</option>
    <option value="/igps/" >
   IGPs</option> 
      <option value="/igps/isis/" > IS-IS</option>
      <option value="/igps/ospf/"  selected> OSPF</option>
  
    <option value="/mpls-vpns/" >
   MPLS VPNs</option>
    <option value="/multicast/" >
   Multicast</option>
    <option value="/netops/" >
   Netops</option>
    <option value="/vendors/" >
   Vendor specifics</option>



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/js/lunr.min.js"></script>
        <script type="text/javascript" src="/js/auto-complete.js"></script>
        <link href="/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "\/";
          
        </script>
        <script type="text/javascript" src="/js/search.js"></script>
      </div>
    

    <h1>OSPF</h1>
    
    
    
    

<p>OSPF notes</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<h3 id="neighborship-problems-checklist">Neighborship problems checklist</h3>

<p>Source: <a href="https://www.inetzero.com/what-is-your-ospf-neighbor-doing-adjancency-problems-in-ospf/">iNET ZERO</a></p>

<ol>
<li>Interfaces present in [edit protocols ospf]</li>
<li>Interfaces are not passive</li>
<li>Interfaces are not down</li>
<li>No FF is blocking OSPF protocol 89</li>
<li>Area mismatch</li>
<li>Timer mismatch</li>
<li>Auth. mismatch</li>
<li>Area type mismatch</li>
<li>Subnet mask mismatch</li>
<li>Duplicate router-id</li>
<li>MTU mismatch</li>
<li>DR priority = 0 on both routers</li>
<li>Duplicate interface ip address</li>
<li>Interface type mismatch</li>
</ol>

<h3 id="tools">Tools</h3>

<p>Show commands.
Traceoptions.
Monitor traffic interface.</p>

<pre><code>monitor traffic interface em1 size 1500 no-resolve detail | matching “ip proto ospf”
</code></pre>

<h3 id="authentication-debugs">Authentication debugs</h3>

<p>Authentication problem is best identified using traceoptions:</p>

<pre><code>[edit protocols ospf traceoptions]
root@vrsx# show
file debugospf size 10m;
flag hello detail;
flag error detail;

[edit protocols ospf traceoptions]
root@vsrx#
</code></pre>

<p>The message for mismatched authentication looks like this:</p>

<pre><code>Jul 10 19:14:59.687339 OSPF packet ignored: authentication failure (bad cksum).
Jul 10 19:14:59.688689 OSPF packet ignored: authentication failure from 172.30.0.26
</code></pre>

<p>Message when the other side doesn&rsquo;t use authentication, but it is required:</p>

<pre><code>Jul 10 19:23:40.327021 OSPF packet ignored: authentication type mismatch (0) from 172.30.0.26
</code></pre>

<p>Succesful negotiation after fixing the issue looks like this:</p>

<pre><code>Jul 10 19:25:11.714647 OSPF rcvd Hello 172.30.0.26 -&gt; 224.0.0.5 (ge-0/0/4.136 IFL 74 area 0.0.0.0)
Jul 10 19:25:11.714695   Version 2, length 44, ID 172.30.5.6, area 0.0.0.0
Jul 10 19:25:11.714738   checksum 0x0, authtype 2
Jul 10 19:25:11.714782   mask 255.255.255.252, hello_ivl 10, opts 0x12, prio 128
Jul 10 19:25:11.714825   dead_ivl 40, DR 172.30.0.26, BDR 0.0.0.0
Jul 10 19:25:11.714870 OSPF restart signaling: Received hello with LLS data from nbr ip=172.30.0.26 id=172.30.5.6.
Jul 10 19:25:11.714923 OSPF restart signaling: Received hello with LR bit set from nbr ip=172.30.0.26 id=172.30.5.6. Set oob-resync capabilty 1.
Jul 10 19:25:11.715291 OSPF restart signaling: set L bit in hellos sent on interface ge-0/0/4.136.
Jul 10 19:25:11.715338 OSPF sent Hello 172.30.0.25 -&gt; 224.0.0.5 (ge-0/0/4.136 IFL 74 area 0.0.0.0)
Jul 10 19:25:11.715381   Version 2, length 48, ID 172.30.5.3, area 0.0.0.0
Jul 10 19:25:11.715425   mask 255.255.255.252, hello_ivl 10, opts 0x12, prio 128
Jul 10 19:25:11.715467   dead_ivl 40, DR 172.30.0.25, BDR 0.0.0.0
Jul 10 19:25:11.715510 OSPF restart signaling: Add LLS data for Hello packet on interface ge-0/0/4.136.
Jul 10 19:25:11.716654 OSPF rcvd Hello 172.30.0.26 -&gt; 224.0.0.5 (ge-0/0/4.136 IFL 74 area 0.0.0.0)
Jul 10 19:25:11.716699   Version 2, length 44, ID 172.30.5.6, area 0.0.0.0
Jul 10 19:25:11.716742   checksum 0x0, authtype 2
Jul 10 19:25:11.720641   mask 255.255.255.252, hello_ivl 10, opts 0x12, prio 128
Jul 10 19:25:11.720697   dead_ivl 40, DR 172.30.0.26, BDR 0.0.0.0
Jul 10 19:25:11.720742 OSPF restart signaling: Received hello with LLS data from nbr ip=172.30.0.26 id=172.30.5.6.
Jul 10 19:25:11.720786 OSPF restart signaling: Received hello with LR bit set from nbr ip=172.30.0.26 id=172.30.5.6. Set oob-resync capabilty 1.
Jul 10 19:25:11.748618 OSPF rcvd Hello 172.30.0.26 -&gt; 224.0.0.5 (ge-0/0/4.136 IFL 74 area 0.0.0.0)
Jul 10 19:25:11.748673   Version 2, length 48, ID 172.30.5.6, area 0.0.0.0
Jul 10 19:25:11.748730   checksum 0x0, authtype 2
Jul 10 19:25:11.748774   mask 255.255.255.252, hello_ivl 10, opts 0x12, prio 128
Jul 10 19:25:11.748817   dead_ivl 40, DR 172.30.0.26, BDR 0.0.0.0
Jul 10 19:25:11.748866 OSPF restart signaling: Received hello with LLS data from nbr ip=172.30.0.26 id=172.30.5.6.
Jul 10 19:25:11.748912 OSPF restart signaling: Received hello with LR bit set from nbr ip=172.30.0.26 id=172.30.5.6. Set oob-resync capabilty 1.
Jul 10 19:25:11.749027 RPD_OSPF_NBRUP: OSPF neighbor 172.30.0.26 (realm ospf-v2 ge-0/0/4.136 area 0.0.0.0) state changed from Init to ExStart due to 2WayRcvd (event reason: neighbor detected this router)
Jul 10 19:25:11.749117 OSPF restart signaling: Send DBD with LR bit on to nbr ip=172.30.0.26 id=172.30.5.6.
Jul 10 19:25:11.749216 OSPF restart signaling: Add LLS data for DbD packet on interface ge-0/0/4.136.
Jul 10 19:25:11.756076 OSPF DR is 172.30.5.6, BDR is 172.30.5.3
Jul 10 19:25:11.756757 OSPF hello from 172.30.0.26 (IFL 74, area 0.0.0.0) absorbed
Jul 10 19:25:11.762080 OSPF restart signaling: set L bit in hellos sent on interface ge-0/0/4.136.
Jul 10 19:25:11.762768 OSPF sent Hello 172.30.0.25 -&gt; 224.0.0.5 (ge-0/0/4.136 IFL 74 area 0.0.0.0)
Jul 10 19:25:11.763076   Version 2, length 48, ID 172.30.5.3, area 0.0.0.0
Jul 10 19:25:11.763152   mask 255.255.255.252, hello_ivl 10, opts 0x12, prio 128
Jul 10 19:25:11.763225   dead_ivl 40, DR 172.30.0.26, BDR 172.30.0.25
Jul 10 19:25:11.763303 OSPF restart signaling: Add LLS data for Hello packet on interface ge-0/0/4.136.
Jul 10 19:25:11.763893 OSPF restart signaling: Received DBD with LLS data from nbr ip=172.30.0.26 id=172.30.5.6.
Jul 10 19:25:11.764106 OSPF restart signaling: Send DBD with LR bit on to nbr ip=172.30.0.26 id=172.30.5.6.
Jul 10 19:25:11.802212 OSPF restart signaling: Add LLS data for DbD packet on interface ge-0/0/4.136.
Jul 10 19:25:11.821028 OSPF rcvd Hello 172.30.0.26 -&gt; 224.0.0.5 (ge-0/0/4.136 IFL 74 area 0.0.0.0)
Jul 10 19:25:11.821083   Version 2, length 48, ID 172.30.5.6, area 0.0.0.0
Jul 10 19:25:11.821124   checksum 0x0, authtype 2
Jul 10 19:25:11.821217   mask 255.255.255.252, hello_ivl 10, opts 0x12, prio 128
Jul 10 19:25:11.821269   dead_ivl 40, DR 172.30.0.26, BDR 172.30.0.25
Jul 10 19:25:11.821390 OSPF restart signaling: Received hello with LLS data from nbr ip=172.30.0.26 id=172.30.5.6.
Jul 10 19:25:11.821436 OSPF restart signaling: Received hello with LR bit set from nbr ip=172.30.0.26 id=172.30.5.6. Set oob-resync capabilty 1.
Jul 10 19:25:11.823745 OSPF restart signaling: Received DBD with LLS data from nbr ip=172.30.0.26 id=172.30.5.6.
Jul 10 19:25:11.823806 OSPF restart signaling: Send DBD with LR bit on to nbr ip=172.30.0.26 id=172.30.5.6.
Jul 10 19:25:11.858401 OSPF restart signaling: Add LLS data for DbD packet on interface ge-0/0/4.136.
Jul 10 19:25:11.882496 RPD_OSPF_NBRUP: OSPF neighbor 172.30.0.26 (realm ospf-v2 ge-0/0/4.136 area 0.0.0.0) state changed from Loading to Full due to LoadDone (event reason: OSPF loading completed)
Jul 10 19:25:12.266533 OSPF periodic xmit from 172.30.0.21 to 224.0.0.5 (IFL 73 area 0.0.0.4)
Jul 10 19:25:14.533324 OSPF hello from 172.30.0.22 (IFL 73, area 0.0.0.4) absorbed
Jul 10 19:25:18.489407 OSPF hello from 172.30.0.13 (IFL 72, area 0.0.0.0) absorbed
Jul 10 19:25:19.197534 OSPF periodic xmit from 172.30.0.14 to 224.0.0.5 (IFL 72 area 0.0.0.0)
Jul 10 19:25:19.826699 OSPF hello from 172.30.0.26 (IFL 74, area 0.0.0.0) absorbed
</code></pre>

<h2 id="resources">Resources</h2>

<p><a href="https://www.inetzero.com/what-is-your-ospf-neighbor-doing-adjancency-problems-in-ospf/">iNET ZERO</a></p>


    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/igps/isis/" title="IS-IS"> <i class="fa fa-chevron-left"></i><label>IS-IS</label></a>
    <a class="nav nav-next" href="/vendors/" title="Vendor specifics" style="margin-right: 0px;"><label>Vendor specifics</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

    
    <div class="date">
        <i class='fa fa-calendar'></i> Last update on 16/06/2019
    </div>
    

    
  </div>


	<div>


  
    Create a content/_footer.md file to customize the footer content
  



	</div>
</footer>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>



<script src="/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>