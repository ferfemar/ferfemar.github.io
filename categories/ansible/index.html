<!DOCTYPE html>
<html>
  <head>
    <title>overloaded bits</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2019-09-06T14:00:39 DST">
<title>ansible :: overloaded bits</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/theme-flex/style.css" rel="stylesheet">

	<link href="/theme-flex/variant-gold.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "\/";
</script>
<meta name="description" content="">



    
  </head>
  <body data-url="/categories/ansible/">
    
      <header>
  <div class="logo">
    
	
  
    <a class="baselink" href="/">overloaded bits</a>
  


  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="https://github.com/ferfemar"  rel="noopener">
                  <i class='fa fa-github'></i> <label>Github repo</label>
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/" class="dd-item">
          <a href="/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/ipspace-course-notes/" class="dd-item haschildren
        ">
      <div>
      <a href="/ipspace-course-notes/">Building Network Automation Solutions Course Notes</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/ipspace-course-notes/watch-list/" class="dd-item">
        <div>
          <a href="/ipspace-course-notes/watch-list/">
            List of materials to study
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/certs/" class="dd-item haschildren
        ">
      <div>
      <a href="/certs/">Certifications</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/certs/jncix-sp/" class="dd-item">
        <div>
          <a href="/certs/jncix-sp/">
            JNCIx-SP
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/igps/" class="dd-item haschildren
        ">
      <div>
      <a href="/igps/">IGPs</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/igps/isis/" class="dd-item haschildren
        ">
      <div>
      <a href="/igps/isis/">ISIS</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/igps/isis/isis/" class="dd-item">
        <div>
          <a href="/igps/isis/isis/">
            Integrated IS-IS notes
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/igps/ospf/" class="dd-item haschildren
        ">
      <div>
      <a href="/igps/ospf/">OSPF</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/igps/ospf/adj_formation/" class="dd-item">
        <div>
          <a href="/igps/ospf/adj_formation/">
            OSPF adj. formation notes
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/igps/ospf/troubleshooting/" class="dd-item">
        <div>
          <a href="/igps/ospf/troubleshooting/">
            OSPF troubleshooting
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/mpls-vpns/" class="dd-item haschildren
        ">
      <div>
      <a href="/mpls-vpns/">MPLS VPNs</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/mpls-vpns/vpls/" class="dd-item">
        <div>
          <a href="/mpls-vpns/vpls/">
            VPLS
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/multicast/" class="dd-item haschildren
        ">
      <div>
      <a href="/multicast/">Multicast</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/multicast/igmp/" class="dd-item">
        <div>
          <a href="/multicast/igmp/">
            IGMP
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/netops/" class="dd-item haschildren
        ">
      <div>
      <a href="/netops/">Netops</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/netops/ansible/" class="dd-item haschildren
        ">
      <div>
      <a href="/netops/ansible/">Ansible</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/netops/ansible/working-with-timestamp/" class="dd-item">
        <div>
          <a href="/netops/ansible/working-with-timestamp/">
            Ansible timestamps
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/netops/ansible/tricks/" class="dd-item">
        <div>
          <a href="/netops/ansible/tricks/">
            Ansible tips, tricks and notes
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/netops/ansible/ansible-w-junos/" class="dd-item">
        <div>
          <a href="/netops/ansible/ansible-w-junos/">
            Junos/Ansible basics
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/netops/ansible/network-engine/" class="dd-item">
        <div>
          <a href="/netops/ansible/network-engine/">
            Network-engine module
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/netops/git/" class="dd-item haschildren
        ">
      <div>
      <a href="/netops/git/">GIT</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/netops/git/panic_buttons/" class="dd-item">
        <div>
          <a href="/netops/git/panic_buttons/">
            Git Panic Commands
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/netops/python/" class="dd-item haschildren
        ">
      <div>
      <a href="/netops/python/">Python</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/netops/python/python-virtualenvs/" class="dd-item">
        <div>
          <a href="/netops/python/python-virtualenvs/">
            Python Virtual Enviroments
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/netops/python/python-basics/" class="dd-item">
        <div>
          <a href="/netops/python/python-basics/">
            Python basics
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/netops/python/openpyxl/" class="dd-item">
        <div>
          <a href="/netops/python/openpyxl/">
            Working with Excel in Python
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/vendors/" class="dd-item haschildren
        ">
      <div>
      <a href="/vendors/">Vendor specifics</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/vendors/iosxe_cli/" class="dd-item">
        <div>
          <a href="/vendors/iosxe_cli/">
            IOS-XE CLI
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/vendors/junos_cli/" class="dd-item">
        <div>
          <a href="/vendors/junos_cli/">
            Junos CLI
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/ipspace-course-notes/" >
   Building Network Automation Solutions Course Notes</option>
    <option value="/certs/" >
   Certifications</option>
    <option value="/igps/" >
   IGPs</option>
    <option value="/mpls-vpns/" >
   MPLS VPNs</option>
    <option value="/multicast/" >
   Multicast</option>
    <option value="/netops/" >
   Netops</option>
    <option value="/vendors/" >
   Vendor specifics</option>



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/js/lunr.min.js"></script>
        <script type="text/javascript" src="/js/auto-complete.js"></script>
        <link href="/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "\/";
          
        </script>
        <script type="text/javascript" src="/js/search.js"></script>
      </div>
    

    <h1>ansible</h1>
    
    
    



<div class="extra-pagination inner">
<nav class="pagination" role="navigation">
	
	<span class="page-number">Page 1 of 1</span>
	
</nav>

</div>


   <article class="post netops">
    <header class="post-header">
        <h2 class="post-title"><a href="/netops/ansible/tricks/">Ansible tips, tricks and notes</a></h2>
    </header>
    <section class="post-excerpt">
        <p> Remove key from dictionary Takes hostvars for the given inventory_hostname and reconstructs it without the groups key
- set_fact: dict: {} - set_fact: dict: &quot;{{ dict | combine({item.key: item.value}) }}&quot; when: item.key not in ['groups'] with_dict: &quot;{{hostvars[inventory_hostname]}}&quot; - debug: msg: &quot;{{dict}}&quot;   <a class="read-more" href="/netops/ansible/tricks/">&raquo;</a></p>
    </section>
    <footer class=" footline" >
         
        

        
        

    </footer>
</article>

   <article class="post netops">
    <header class="post-header">
        <h2 class="post-title"><a href="/netops/ansible/ansible-w-junos/">Junos/Ansible basics</a></h2>
    </header>
    <section class="post-excerpt">
        <p>Disclaimer: may be outdated
Retrieve config Using Galaxy module:
 - name: Retrieve the interface configuration using Galaxy module juniper_junos_config: retrieve: 'committed' filter: '&lt;interfaces&gt;&lt;interface&gt;&lt;name&gt;{{interface}}&lt;/name&gt;&lt;unit&gt;&lt;name&gt;{{unit}}&lt;/name&gt;&lt;/unit&gt;&lt;/interface&gt;&lt;/interfaces&gt;' diff: true check: false commit: false format: xml register: iface_info  Using netconf_get module:
- name: Retrieve the interface configuration using netconf_get module netconf_get: source: running filter: '&lt;configuration&gt;&lt;interfaces&gt;&lt;interface&gt;&lt;name&gt;{{interface}}&lt;/name&gt;&lt;unit&gt;&lt;name&gt;{{unit}}&lt;/name&gt;&lt;/unit&gt;&lt;/interface&gt;&lt;/interfaces&gt;&lt;/configuration&gt;' # filter: '&lt;configuration&gt;&lt;interfaces&gt;&lt;interface[name=&quot;ge-0/0/6&quot;]&gt;&lt;/interface&gt;&lt;/interfaces&gt;&lt;/configuration&gt;' register: iface_info  Note: Junos doesnt support xpath filtering in get-config operation <a class="read-more" href="/netops/ansible/ansible-w-junos/">&raquo;</a></p>
    </section>
    <footer class=" footline" >
         
        

        
        

    </footer>
</article>

   <article class="post netops">
    <header class="post-header">
        <h2 class="post-title"><a href="/netops/ansible/network-engine/">Network-engine module</a></h2>
    </header>
    <section class="post-excerpt">
        <p>1 --- 2 - name: Parser role 3 hosts: ios 4 roles: 5 - &quot;ansible-network.network-engine&quot; 6 tasks: 7 - name: &quot;Get router configuration&quot; 8 ios_command: 9 commands: &quot;show running-config | section ^vrf_definition&quot; 10 register: vrf_config 11 12 - name: DEBUG1 13 debug: 14 var: vrf_config.stdout[0] 15 16 - name: &quot;Parse RT data&quot; 17 command_parser: 18 file: &quot;parsers/vrf.yml&quot; 19 content: &quot;{{ vrf_config.stdout[0] }}&quot; 20 21 - name: DEBUG2 22 debug: 23 msg: &quot;TEST {{item}}&quot; 24 loop: &quot;{{vrf_data | dictsort }}&quot; 25 26   1 --- 2 - name: &quot;Parser metadata&quot; 3 parser_metadata: 4 version: 1. <a class="read-more" href="/netops/ansible/network-engine/">&raquo;</a></p>
    </section>
    <footer class=" footline" >
         
        

        
        

    </footer>
</article>

   <article class="post netops">
    <header class="post-header">
        <h2 class="post-title"><a href="/netops/ansible/working-with-timestamp/">Ansible timestamps</a></h2>
    </header>
    <section class="post-excerpt">
        <p>Timestamps in Ansible Using facts (gather_facts cannot be False):
 tasks: - name: Ansible date fact example debug: var=ansible_date_time.date  Using local time via lookup:
- hosts: all tasks: - debug: msg=&quot;{{ lookup('pipe','date') }}&quot;  or rather formatted:
- hosts: all tasks: - debug: msg=&quot;{{ lookup('pipe','date +%Y-%m-%d-%H-%M-%S') }}  Reference of other facts:
&quot;date&quot;: &quot;2017-07-27&quot;, &quot;day&quot;: &quot;27&quot;, &quot;epoch&quot;: &quot;1501173540&quot;, &quot;hour&quot;: &quot;22&quot;, &quot;iso8601&quot;: &quot;2017-07-27T16:39:00Z&quot;, &quot;iso8601_basic&quot;: &quot;20170727T220900129160&quot;, &quot;iso8601_basic_short&quot;: &quot;20170727T220900&quot;, &quot;iso8601_micro&quot;: &quot;2017-07-27T16:39:00.129240Z&quot;, &quot;minute&quot;: &quot;09&quot;, &quot;month&quot;: &quot;07&quot;, &quot;second&quot;: &quot;00&quot;, &quot;time&quot;: &quot;22:09:00&quot;, &quot;tz&quot;: &quot;IST&quot;, &quot;tz_offset&quot;: &quot;+0530&quot;, &quot;weekday&quot;: &quot;Thursday&quot;, &quot;weekday_number&quot;: &quot;4&quot;, &quot;weeknumber&quot;: &quot;30&quot;, &quot;year&quot;: &quot;2017&quot;  Sources and References http://www. <a class="read-more" href="/netops/ansible/working-with-timestamp/">&raquo;</a></p>
    </section>
    <footer class=" footline" >
         
        

        
        

    </footer>
</article>


<div style="margin-bottom:2rem"></div>

<nav class="pagination" role="navigation">
	
	<span class="page-number">Page 1 of 1</span>
	
</nav>




    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-next" href="/vendors/" title="Vendor specifics" style="margin-right: 0px;"><label>Vendor specifics</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

    
    <div class="date">
        <i class='fa fa-calendar'></i> Last update on 06/09/2019
    </div>
    

    
  </div>


	<div>


  
    Create a content/_footer.md file to customize the footer content
  



	</div>
</footer>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>



<script src="/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>